// Generated by CoffeeScript 2.7.0
var consola, fs, getCompiledFiles, path, sleep;

fs = require('fs');

path = require('path');

consola = require('consola');

sleep = function(time) {
  return new Promise(function(resolve) {
    return setTimeout(resolve, time);
  });
};

getCompiledFiles = function(targetPath) {
  var error, filesList, i, item, itemPath, items, len, stat;
  filesList = [];
  if (!fs.existsSync(targetPath)) {
    consola.warn(`Path does not exist, skipping scan ${targetPath}`);
    return [];
  }
  try {
    stat = fs.statSync(targetPath);
    if (stat.isDirectory()) {
      consola.start(`Scanning directory: ${targetPath}`);
      items = fs.readdirSync(targetPath);
      for (i = 0, len = items.length; i < len; i++) {
        item = items[i];
        itemPath = path.join(targetPath, item);
        filesList = filesList.concat(getCompiledFiles(itemPath));
      }
    } else if (stat.isFile()) {
      if (targetPath.match(/\.js(?:\.map)?$/i)) {
        if (fs.existsSync(targetPath)) {
          consola.info(`Found file: \`${targetPath}\``);
          filesList.push(targetPath);
        }
      }
    }
  } catch (error1) {
    error = error1;
    consola.warn(`Could not scan output path ${targetPath}: ${error.message}`);
  }
  return filesList;
};

module.exports = {sleep, getCompiledFiles};
